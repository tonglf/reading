### 1.9.2 临时对象的产生与运用

所谓临时对象，就是一种无名对象（ unnamed objects) 。它的出现如果不在程序员的预期之下（ 例如任何 pass by value 操作都会引发 copy 操作，于是形成一个临时对象），往往造成效率上的负担$^{[13]}$。但有时候刻意制造一些临时对象，却又是使程序干净清爽的技巧。**刻意制造临时对象的方法是，在型别名称之后直接加一对小括号，并可指定初值，例如 shape(3,5）或 int (8)，其意义相当于调用相应的 constructor 且不指定对象名称。**STL 最常将此技巧应用于仿函数（functor）与算法的搭配上，例如:

```cpp
// file: 1config-temporary-object.cpp 
// 本例测试仿函式用于 for_each()的情形
// vc6[o] cb4[o] gcc[o] 

// 匿名对象使用

#include <vector>
#include <algorithm>
#include <iostream>

using namespace std;

template <typename T>
class print {
public:
    void operator() (const T& elem) {
        cout << elem << ' ';
    }
};

int main() {
    int ia[6] = {0, 1, 2, 3, 4, 5};
    vector<int> iv(ia, ia + 6);
    
    // print<int>() 是一个匿名对象，不是函数调用
    for_each(iv.begin(), iv.end(), print<int>());	// 0 1 2 3 4 5 
}
```

最后一行便是产生 “ function template 具现体 ” print\<int> 的一个临时对象。这个对象将被传人 for_each(）之中起作用。当 for_each( ) 结束时，这个临时对象也就结束了它的生命。



[13] 请参考《More Effective C++》条款19: Understand the origin of temporary objects.